import streamlit as st
import random
import requests

# ìœ„í‚¤ë°±ê³¼ ì´ë¯¸ì§€ í•¨ìˆ˜
def get_wikipedia_image(location_name):
    """ìœ„í‚¤ë°±ê³¼ì—ì„œ ë„ì‹œ ëŒ€í‘œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê³  ì¶œì²˜ë¥¼ ë°˜í™˜"""
    try:
        wiki_map = {
            "ê´Œ": "Guam",
            "ì•„í…Œë„¤": "Athens",
            "ì‚°í† ë¦¬ë‹ˆ": "Santorini",
            "í”„ë¼í•˜": "Prague",
            "ì‹±ê°€í¬ë¥´": "Singapore",
            "ë°œë¦¬": "Bali",
            "ì´ìŠ¤íƒ„ë¶ˆ": "Istanbul",
            "ë³´ë¼ì¹´ì´": "Boracay",
            "ë°©ì½•": "Bangkok",
            "í‘¸ê¾¸ì˜¥": "PhÃº Quá»‘c",
            "ìŠ¤ìœ„ìŠ¤ ì¸í„°ë¼ì¼„": "Interlaken",
            "íƒœêµ­ í‘¸ê»«": "Phuket",
            "ë‰´ì§ˆëœë“œ í€¸ìŠ¤íƒ€ìš´": "Queenstown",
            "ì¼ë³¸ ë„ì¿„": "Tokyo",
            "ë² íŠ¸ë‚¨ ë‹¤ë‚­": "Da Nang",
            "ì´íƒˆë¦¬ì•„ ë¡œë§ˆ": "Rome",
            "ì•„ì´ìŠ¬ë€ë“œ ë ˆì´ìº¬ë¹„í¬": "Reykjavik",
            "ë¯¸êµ­ í•˜ì™€ì´ í˜¸ë†€ë£°ë£¨": "Honolulu",
            "ìºë‚˜ë‹¤ ë°´í”„": "Banff",
            "ëª¨ë¡œì½” ë§ˆë¼ì¼€ì‹œ": "Marrakech",
            "ë¯¸êµ­ ë‰´ìš•": "New York",
            "í”„ë‘ìŠ¤ íŒŒë¦¬": "Paris"
        }
        title = wiki_map.get(location_name, location_name)
        url = f"https://en.wikipedia.org/api/rest_v1/page/summary/{title}"
        res = requests.get(url)
        data = res.json()
        img_url = data.get("thumbnail", {}).get("source")
        page_url = data.get("content_urls", {}).get("desktop", {}).get("page")
        return img_url, page_url
    except:
        return None, None

# ì—¬í–‰ì§€ ë°ì´í„°ë² ì´ìŠ¤ ë‹¤ì‹œ í†µí•©
def get_destinations_data():
    return [
        # ê¸°ì¡´ í™•ì¥ëœ 10ê°œ
        {"name": "ê´Œ", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 180, "flight_time": "ì•½ 4ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì—´ëŒ€ í•´ì–‘ì„± ê¸°í›„ë¡œ ì—°ì¤‘ ë”°ëœ»í•©ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "27~32ë„", "ê´€ê´‘ì§€": ["íˆ¬ëª¬ í•´ë³€", "ì‚¬ë‘ì˜ ì ˆë²½"], "ë§›ì§‘": ["í”„ë¡œì•„", "íˆ¬ëª¬ë² ì´ ì¹´í˜"]},
         "budget_breakdown": {"í•­ê³µí¸": "70ë§Œì›", "ìˆ™ë°•": "60ë§Œì›", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "20ë§Œì›"}, "hotel": {"name": "Dusit Thani Guam", "rating": "4.6", "desc": "ëŸ­ì…”ë¦¬ ì˜¤ì…˜ë·° ë¦¬ì¡°íŠ¸"}},
        {"name": "ì•„í…Œë„¤", "climate": "ë”ìš´", "activity": "ê´€ê´‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 230, "flight_time": "ì•½ 12ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ë¥ê³  ê±´ì¡°í•œ ì§€ì¤‘í•´ì„± ì—¬ë¦„ì…ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "28~35ë„", "ê´€ê´‘ì§€": ["ì•„í¬ë¡œí´ë¦¬ìŠ¤", "í”Œë¼ì¹´ ê±°ë¦¬"], "ë§›ì§‘": ["O Thanasis", "Kuzina Athens"]},
         "budget_breakdown": {"í•­ê³µí¸": "100ë§Œì›", "ìˆ™ë°•": "80ë§Œì›", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "20ë§Œì›"}, "hotel": {"name": "Electra Palace Athens", "rating": "4.5", "desc": "ì•„í¬ë¡œí´ë¦¬ìŠ¤ ì „ë§ì˜ í˜¸í…”"}},
        {"name": "ì‚°í† ë¦¬ë‹ˆ", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ"], "min_budget": 250, "flight_time": "ì•½ 13ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "í–‡ì‚´ ì¢‹ì€ ì§€ì¤‘í•´ì„± ê¸°í›„", "í‰ê· ê¸°ì˜¨": "27~33ë„", "ê´€ê´‘ì§€": ["ì´ì•„ ë§ˆì„", "í”¼ë¼"], "ë§›ì§‘": ["Metaxi Mas", "Argo Restaurant"]},
         "budget_breakdown": {"í•­ê³µí¸": "110ë§Œì›", "ìˆ™ë°•": "90ë§Œì›", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "20ë§Œì›"}, "hotel": {"name": "Canaves Oia Suites", "rating": "4.8", "desc": "ì ˆë²½ ìœ„ ì¸í”¼ë‹ˆí‹° í’€"}},
        {"name": "í”„ë¼í•˜", "climate": "ì‹œì›í•œ", "activity": "ê´€ê´‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 200, "flight_time": "ì•½ 11ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì—¬ë¦„ì—” ì„ ì„ í•˜ê³  ì¾Œì í•©ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "20~26ë„", "ê´€ê´‘ì§€": ["ì¹´ë¥¼ ë‹¤ë¦¬", "í”„ë¼í•˜ì„±"], "ë§›ì§‘": ["Lokal", "MlÃ½nec"]},
         "budget_breakdown": {"í•­ê³µí¸": "90ë§Œì›", "ìˆ™ë°•": "70ë§Œì›", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "20ë§Œì›"}, "hotel": {"name": "Hotel Kings Court", "rating": "4.5", "desc": "ë„ì‹¬ ì¤‘ì‹¬ì˜ ê³ ê¸‰ í˜¸í…”"}},
        {"name": "ì‹±ê°€í¬ë¥´", "climate": "ë”ìš´", "activity": "ì‡¼í•‘", "companion": ["í˜¼ì", "ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 220, "flight_time": "ì•½ 6ì‹œê°„ 30ë¶„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ê³ ì˜¨ ë‹¤ìŠµí•œ ì—´ëŒ€ ê¸°í›„", "í‰ê· ê¸°ì˜¨": "26~33ë„", "ê´€ê´‘ì§€": ["ë§ˆë¦¬ë‚˜ ë² ì´", "ê°€ë“ ìŠ¤ ë°”ì´ ë” ë² ì´"], "ë§›ì§‘": ["ë§¥ìŠ¤ì›° í‘¸ë“œì„¼í„°", "Jumbo Seafood"]},
         "budget_breakdown": {"í•­ê³µí¸": "90ë§Œì›", "ìˆ™ë°•": "80ë§Œì›", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "20ë§Œì›"}, "hotel": {"name": "Marina Bay Sands", "rating": "4.7", "desc": "ì¸í”¼ë‹ˆí‹° í’€ë¡œ ìœ ëª…"}},
        {"name": "ë°œë¦¬", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 150, "flight_time": "ì•½ 7ì‹œê°„", "hemisphere": "ë‚¨",
         "description": {"ê¸°í›„": "ê³ ì˜¨ë‹¤ìŠµ, í•´ë³€ê³¼ ì‚°ì„ ëª¨ë‘ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”.", "í‰ê· ê¸°ì˜¨": "26~31ë„", "ê´€ê´‘ì§€": ["ìš°ë¶“", "ì¿ íƒ€ í•´ë³€"], "ë§›ì§‘": ["Mamasan", "Bambu"]},
         "budget_breakdown": {"í•­ê³µí¸": "60ë§Œì›", "ìˆ™ë°•": "50ë§Œì›", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "20ë§Œì›"}, "hotel": {"name": "Four Seasons Bali", "rating": "4.8", "desc": "ì „í†µë¯¸+ëŸ­ì…”ë¦¬"}},
        {"name": "ì´ìŠ¤íƒ„ë¶ˆ", "climate": "ì‹œì›í•œ", "activity": "ê´€ê´‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 230, "flight_time": "ì•½ 12ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì´ˆì—¬ë¦„ì€ ì„ ì„ í•˜ê³  ê±´ì¡°í•¨", "í‰ê· ê¸°ì˜¨": "20~26ë„", "ê´€ê´‘ì§€": ["ë¸”ë£¨ëª¨ìŠ¤í¬", "ì•„ì•¼ ì†Œí”¼ì•„"], "ë§›ì§‘": ["Ciya Sofrasi", "Nusr-Et"]},
         "budget_breakdown": {"í•­ê³µí¸": "90ë§Œì›", "ìˆ™ë°•": "80ë§Œì›", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "30ë§Œì›"}, "hotel": {"name": "Sirkeci Mansion", "rating": "4.6", "desc": "ì—­ì‚¬ ì¤‘ì‹¬ì§€ ìœ„ì¹˜"}},
        {"name": "ë³´ë¼ì¹´ì´", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 130, "flight_time": "ì•½ 5ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì—´ëŒ€ ê¸°í›„, ë°”ë‹¤ê°€ ì•„ë¦„ë‹¤ì›€", "í‰ê· ê¸°ì˜¨": "28~32ë„", "ê´€ê´‘ì§€": ["í™”ì´íŠ¸ ë¹„ì¹˜", "ìœŒë¦¬ìŠ¤ ë¡"], "ë§›ì§‘": ["Dâ€™Talipapa", "The Sunny Side Cafe"]},
         "budget_breakdown": {"í•­ê³µí¸": "50ë§Œì›", "ìˆ™ë°•": "50ë§Œì›", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "10ë§Œì›"}, "hotel": {"name": "Shangri-La Boracay", "rating": "4.7", "desc": "í”„ë¼ì´ë¹— í•´ë³€"}},
        {"name": "ë°©ì½•", "climate": "ë”ìš´", "activity": "ì‡¼í•‘", "companion": ["í˜¼ì", "ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 120, "flight_time": "ì•½ 6ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ê³ ì˜¨ë‹¤ìŠµ, ë”ìœ„ì— ê°•í•œ ë¶„ê»˜ ì¶”ì²œ", "í‰ê· ê¸°ì˜¨": "29~35ë„", "ê´€ê´‘ì§€": ["ì™“í¬", "ì¹´ì˜¤ì‚°ë¡œë“œ"], "ë§›ì§‘": ["Jay Fai", "Somtum Der"]},
         "budget_breakdown": {"í•­ê³µí¸": "50ë§Œì›", "ìˆ™ë°•": "40ë§Œì›", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "10ë§Œì›"}, "hotel": {"name": "The Okura Prestige", "rating": "4.6", "desc": "ë„ì‹¬ ê³ ê¸‰ í˜¸í…”"}},
        {"name": "í‘¸ê¾¸ì˜¥", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ"], "min_budget": 140, "flight_time": "ì•½ 5ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "í•´ì–‘ì„± ì—´ëŒ€ ê¸°í›„, í•´ë³€ íŠ¹í™”", "í‰ê· ê¸°ì˜¨": "28~33ë„", "ê´€ê´‘ì§€": ["ì‚¬ì˜¤ ë¹„ì¹˜", "ë¹ˆí„ëœë“œ"], "ë§›ì§‘": ["BÃºn Quáº­y Kiáº¿n XÃ¢y", "Crab House"]},
         "budget_breakdown": {"í•­ê³µí¸": "60ë§Œì›", "ìˆ™ë°•": "50ë§Œì›", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "10ë§Œì›"}, "hotel": {"name": "JW Marriott Phu Quoc", "rating": "4.8", "desc": "ì´êµ­ì  ëŸ­ì…”ë¦¬"}},

        # ì›ë˜ ìˆë˜ ëª©ì ì§€ 10ê°œ (Interlaken, Phuket, Queenstown ë“±)
        {"name": "ìŠ¤ìœ„ìŠ¤ ì¸í„°ë¼ì¼„", "climate": "ì‹œì›í•œ", "activity": "íœ´ì–‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 300, "flight_time": "ì•½ 12ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì•Œí”„ìŠ¤ ì‚°ì†ì— ìœ„ì¹˜í•´ ì—¬ë¦„ì—ë„ ì„ ì„ í•˜ê³  ìƒì¾Œí•©ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 15~22ë„", "ê´€ê´‘ì§€": ["ìœµí”„ë¼ìš°ìš”í", "í•˜ë” ì¿¨ë¦„", "íˆ° í˜¸ìˆ˜"], "ë§›ì§‘": ["Husi Bierhaus â€“ ë§¥ì£¼ì™€ ì „í†µì‹", "Schuh â€“ ì´ˆì½œë¦¿ ë””ì €íŠ¸ ìœ ëª…"]},
         "budget_breakdown": {"í•­ê³µí¸": "120ë§Œì›", "ìˆ™ë°•": "100ë§Œì› (4ì„±ê¸‰ í˜¸í…” 4ë°•)", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "50ë§Œì› (ê¸°ì°¨, ì¼€ì´ë¸”ì¹´ ë“±)"}, "hotel": {"name": "Lindner Grand Hotel Beau Rivage", "rating": "4.4/5", "desc": "ìœµí”„ë¼ìš° ê°• ì „ë§ì´ ë©‹ì§„ í´ë˜ì‹ í˜¸í…”"}},
        {"name": "íƒœêµ­ í‘¸ê»«", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["í˜¼ì", "ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 100, "flight_time": "ì•½ 6ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ëœ¨ê±°ìš´ í–‡ì‚´ê³¼ ë°”ë‹¤, ìŠ¤ì½œì´ ê°„í˜¹ ìˆì§€ë§Œ ì—¬í–‰ì—” í° ì§€ì¥ ì—†ì–´ìš”.", "í‰ê· ê¸°ì˜¨": "ì•½ 28~32ë„", "ê´€ê´‘ì§€": ["ë¹ í†µ í•´ë³€", "ì„¬ íˆ¬ì–´", "ë¹… ë¶€ë‹¤"], "ë§›ì§‘": ["Ko Benz â€“ ë¼ì§€ê³ ê¸° êµ­ìˆ˜", "Blue Elephant â€“ ì „í†µ íƒœêµ­ ìš”ë¦¬"]},
         "budget_breakdown": {"í•­ê³µí¸": "50ë§Œì›", "ìˆ™ë°•": "40ë§Œì› (ë¦¬ì¡°íŠ¸ 4ë°•)", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "10ë§Œì› (ë§ˆì‚¬ì§€, êµí†µ ë“±)"}, "hotel": {"name": "The Shore at Katathani", "rating": "4.7/5", "desc": "ë°”ë‹¤ ì „ë§ í’€ë¹Œë¼, ì»¤í”Œ ì—¬í–‰ì— ë”±!"}},
        {"name": "ë‰´ì§ˆëœë“œ í€¸ìŠ¤íƒ€ìš´", "climate": "ì¶”ìš´", "activity": "ëª¨í—˜", "companion": ["í˜¼ì", "ì¹œêµ¬ë“¤"], "min_budget": 300, "flight_time": "ì•½ 13ì‹œê°„", "hemisphere": "ë‚¨",
         "description": {"ê¸°í›„": "ê²¨ìš¸ì„ ë§ì€ í€¸ìŠ¤íƒ€ìš´ì€ ì„¤ê²½ê³¼ í•¨ê»˜ ë‹¤ì–‘í•œ ì•¡í‹°ë¹„í‹°ë¡œ ê°€ë“í•´ìš”.", "í‰ê· ê¸°ì˜¨": "ì•½ 0~10ë„", "ê´€ê´‘ì§€": ["ì™€ì¹´í‹°í‘¸ í˜¸ìˆ˜", "ìŠ¤í‚¤ì¥", "ë²ˆì§€ì í”„"], "ë§›ì§‘": ["Fergburger â€“ ì „ì„¤ì˜ ë²„ê±°", "The Cow â€“ ë²½ë‚œë¡œ ìˆëŠ” í”¼ìì§‘"]},
         "budget_breakdown": {"í•­ê³µí¸": "140ë§Œì›", "ìˆ™ë°•": "90ë§Œì› (ìŠ¤í‚¤ ë¦¬ì¡°íŠ¸ 4ë°•)", "ì‹ë¹„": "40ë§Œì›", "ê¸°íƒ€": "30ë§Œì› (ìŠ¤í‚¤ì¥, ì•¡í‹°ë¹„í‹°)"}, "hotel": {"name": "QT Queenstown", "rating": "4.5/5", "desc": "ìŠ¤í‚¤ì–´ë“¤ì„ ìœ„í•œ ëª¨ë˜í•˜ê³  ê°ê°ì ì¸ í˜¸í…”"}},
        {"name": "ì¼ë³¸ ë„ì¿„", "climate": "ì‹œì›í•œ", "activity": "ì‡¼í•‘", "companion": ["í˜¼ì", "ì¹œêµ¬ë“¤"], "min_budget": 150, "flight_time": "ì•½ 2ì‹œê°„ 30ë¶„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ë„ì¿„ì˜ ì—¬ë¦„ì€ ë¥ê³  ìŠµí•˜ì§€ë§Œ ë„ì‹œ íƒí—˜ì— ì í•©í•´ìš”.", "í‰ê· ê¸°ì˜¨": "ì•½ 22~30ë„", "ê´€ê´‘ì§€": ["ì‹ ì£¼ì¿ ", "ì‹œë¶€ì•¼", "ì•„í‚¤í•˜ë°”ë¼"], "ë§›ì§‘": ["ì´ì¹˜ë€ ë¼ë©˜", "ìŠ¤ì‹œ ì”ë§ˆì´"]},
         "budget_breakdown": {"í•­ê³µí¸": "40ë§Œì›", "ìˆ™ë°•": "60ë§Œì› (í˜¸í…” 4ë°•)", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "20ë§Œì› (êµí†µ, ì…ì¥ë£Œ ë“±)"}, "hotel": {"name": "Shinjuku Granbell Hotel", "rating": "4.3/5", "desc": "ë„ì‹¬ ì† í˜„ëŒ€ì  ë””ìì¸ í˜¸í…”"}},
        {"name": "ë² íŠ¸ë‚¨ ë‹¤ë‚­", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 100, "flight_time": "ì•½ 4ì‹œê°„ 30ë¶„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ë”ìš´ ë‚ ì”¨ì™€ ì•„ë¦„ë‹¤ìš´ í•´ë³€ì´ ì—¬í–‰ì˜ ë§¤ë ¥ì…ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 27~33ë„", "ê´€ê´‘ì§€": ["ë°”ë‚˜í", "ë¯¸ì¼€ í•´ë³€", "í˜¸ì´ì•ˆ êµ¬ì‹œê°€ì§€"], "ë§›ì§‘": ["ë°˜ë¯¸ í¬", "ë¯¸ê½"]},
         "budget_breakdown": {"í•­ê³µí¸": "40ë§Œì›", "ìˆ™ë°•": "30ë§Œì› (ë¦¬ì¡°íŠ¸ 4ë°•)", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "10ë§Œì› (êµí†µ, ì•¡í‹°ë¹„í‹°)"}, "hotel": {"name": "InterContinental Danang Sun Peninsula Resort", "rating": "4.8/5", "desc": "í˜¸ì´ì•ˆê³¼ ê°€ê¹ê³  í•´ë³€ ë·°ê°€ ì¢‹ì€ ê³ ê¸‰ ë¦¬ì¡°íŠ¸"}},
        {"name": "ì´íƒˆë¦¬ì•„ ë¡œë§ˆ", "climate": "ë”ìš´", "activity": "ê´€ê´‘", "companion": ["í˜¼ì", "ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 250, "flight_time": "ì•½ 12ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì§€ì¤‘í•´ì„± ê¸°í›„ë¡œ ì—¬ë¦„ì—” ëœ¨ê²ì§€ë§Œ ì—¬í–‰ì—ëŠ” ì ë‹¹í•©ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 26~34ë„", "ê´€ê´‘ì§€": ["ì½œë¡œì„¸ì›€", "ë°”í‹°ì¹¸", "íŠ¸ë ˆë¹„ ë¶„ìˆ˜"], "ë§›ì§‘": ["Roscioli", "Da Enzo al 29"]},
         "budget_breakdown": {"í•­ê³µí¸": "100ë§Œì›", "ìˆ™ë°•": "90ë§Œì› (í˜¸í…” 4ë°•)", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "30ë§Œì› (ì…ì¥ë£Œ, êµí†µ ë“±)"}, "hotel": {"name": "Hotel Artemide", "rating": "4.6/5", "desc": "ë„ì‹¬ ì¤‘ì‹¬ì— ìœ„ì¹˜í•œ ê³ ê¸‰ í˜¸í…”"}},
        {"name": "ì•„ì´ìŠ¬ë€ë“œ ë ˆì´ìº¬ë¹„í¬", "climate": "ì¶”ìš´", "activity": "ê´€ê´‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 350, "flight_time": "ì•½ 14ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "í•œì—¬ë¦„ì—ë„ ì„ ì„ í•˜ê±°ë‚˜ ìŒ€ìŒ€í•˜ë©° ë§‘ì€ ë‚ ì´ ë§ì•„ìš”.", "í‰ê· ê¸°ì˜¨": "ì•½ 8~15ë„", "ê´€ê´‘ì§€": ["ë¸”ë£¨ë¼êµ°", "ê³¨ë“ ì„œí´", "ë¹™í•˜í˜¸ìˆ˜"], "ë§›ì§‘": ["Icelandic Street Food", "Grillmarkadurinn"]},
         "budget_breakdown": {"í•­ê³µí¸": "140ë§Œì›", "ìˆ™ë°•": "120ë§Œì› (í˜¸í…” 4ë°•)", "ì‹ë¹„": "40ë§Œì›", "ê¸°íƒ€": "50ë§Œì› (ë Œí„°ì¹´, ì˜¨ì²œ ë“±)"}, "hotel": {"name": "Fosshotel Reykjavik", "rating": "4.4/5", "desc": "ë„ì‹¬ê³¼ ê°€ê¹Œìš°ë©´ì„œ ë°”ë‹¤ ì „ë§ë„ ì¢‹ì€ í˜¸í…”"}},
        {"name": "ë¯¸êµ­ í•˜ì™€ì´ í˜¸ë†€ë£°ë£¨", "climate": "ë”ìš´", "activity": "íœ´ì–‘", "companion": ["ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 300, "flight_time": "ì•½ 9ì‹œê°„ 30ë¶„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì—°ì¤‘ ë”ìš´ ë‚ ì”¨ë¡œ ìœ ëª…í•˜ë©° ìŠµë„ëŠ” ë¹„êµì  ë‚®ìŠµë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 28~33ë„", "ê´€ê´‘ì§€": ["ì™€ì´í‚¤í‚¤ í•´ë³€", "ë‹¤ì´ì•„ëª¬ë“œ í—¤ë“œ", "í•˜ë‚˜ìš°ë§ˆ ë² ì´"], "ë§›ì§‘": ["Leonard's Bakery", "Marukame Udon"]},
         "budget_breakdown": {"í•­ê³µí¸": "130ë§Œì›", "ìˆ™ë°•": "100ë§Œì› (ë¦¬ì¡°íŠ¸ 4ë°•)", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "40ë§Œì› (ë Œí„°ì¹´, íˆ¬ì–´)"}, "hotel": {"name": "Hilton Hawaiian Village", "rating": "4.5/5", "desc": "ì™€ì´í‚¤í‚¤ í•´ë³€ ë°”ë¡œ ì• ë¦¬ì¡°íŠ¸"}},
        {"name": "ìºë‚˜ë‹¤ ë°´í”„", "climate": "ì‹œì›í•œ", "activity": "íœ´ì–‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 280, "flight_time": "ì•½ 11ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì—¬ë¦„ì—ë„ ì‹œì›í•˜ê³  ì„ ì„ í•˜ë©° ì¾Œì í•œ ë‚ ì”¨ë¥¼ ìë‘í•©ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 12~20ë„", "ê´€ê´‘ì§€": ["ë ˆì´í¬ ë£¨ì´ìŠ¤", "ë°´í”„ êµ­ë¦½ê³µì›", "ê³¤ëŒë¼"], "ë§›ì§‘": ["Three Ravens", "Eddie Burger"]},
         "budget_breakdown": {"í•­ê³µí¸": "120ë§Œì›", "ìˆ™ë°•": "90ë§Œì› (í˜¸í…” 4ë°•)", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "40ë§Œì› (ìì—°ê³µì› ì…ì¥ë£Œ, êµí†µ ë“±)"}, "hotel": {"name": "Fairmont Banff Springs", "rating": "4.6/5", "desc": "ì‚°ì†ì— ìˆëŠ” ê³ ì„± ê°™ì€ ëŸ­ì…”ë¦¬ í˜¸í…”"}},
        {"name": "ëª¨ë¡œì½” ë§ˆë¼ì¼€ì‹œ", "climate": "ë”ìš´", "activity": "ê´€ê´‘", "companion": ["ì»¤í”Œ", "ì¹œêµ¬ë“¤"], "min_budget": 200, "flight_time": "ì•½ 16ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì‚¬ë§‰ ê·¼ì²˜ë¡œ ë§¤ìš° ë”ìš´ ë‚ ì”¨ì§€ë§Œ ê±´ì¡°í•©ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 30~38ë„", "ê´€ê´‘ì§€": ["ì œë§ˆ ì—˜í”„ë‚˜", "ë°”íˆì•„ ê¶ì „", "ìˆ˜í¬ ì‹œì¥"], "ë§›ì§‘": ["Nomad", "CafÃ© des Ã‰pices"]},
         "budget_breakdown": {"í•­ê³µí¸": "90ë§Œì›", "ìˆ™ë°•": "60ë§Œì› (ë¦¬ì•¼ë“œ 4ë°•)", "ì‹ë¹„": "20ë§Œì›", "ê¸°íƒ€": "30ë§Œì› (ì‹œì¥, êµí†µ ë“±)"}, "hotel": {"name": "Riad Yasmine", "rating": "4.7/5", "desc": "ì „í†µ ê±´ì¶• ì–‘ì‹ì˜ ì¸ìŠ¤íƒ€ ëª…ì†Œ"}},
        {"name": "ë¯¸êµ­ ë‰´ìš•", "climate": "ë”ìš´", "activity": "ì‡¼í•‘", "companion": ["í˜¼ì", "ì¹œêµ¬ë“¤"], "min_budget": 350, "flight_time": "ì•½ 14ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "ì—¬ë¦„ì—” ë¥ê³  ìŠµí•˜ì§€ë§Œ ë„ì‹œ íƒí—˜ì—” ì™„ë²½í•´ìš”.", "í‰ê· ê¸°ì˜¨": "ì•½ 26~34ë„", "ê´€ê´‘ì§€": ["ì„¼íŠ¸ëŸ´ íŒŒí¬", "ë¸Œë£¨í´ë¦°", "ììœ ì˜ ì—¬ì‹ ìƒ"], "ë§›ì§‘": ["Shake Shack", "Katz's Delicatessen"]},
         "budget_breakdown": {"í•­ê³µí¸": "150ë§Œì›", "ìˆ™ë°•": "120ë§Œì› (ë§¨í•´íŠ¼ í˜¸í…” 4ë°•)", "ì‹ë¹„": "40ë§Œì›", "ê¸°íƒ€": "40ë§Œì› (ë¸Œë¡œë“œì›¨ì´, ì…ì¥ë£Œ ë“±)"}, "hotel": {"name": "The New Yorker", "rating": "4.3/5", "desc": "íœì—­ ë°”ë¡œ ì•ì˜ ì¸ê¸° í˜¸í…”"}},
        {"name": "í”„ë‘ìŠ¤ íŒŒë¦¬", "climate": "ì‹œì›í•œ", "activity": "ê´€ê´‘", "companion": ["í˜¼ì", "ì»¤í”Œ"], "min_budget": 270, "flight_time": "ì•½ 11ì‹œê°„", "hemisphere": "ë¶",
         "description": {"ê¸°í›„": "7~8ì›”ì—” ì„ ì„ í•˜ê±°ë‚˜ ë”°ëœ»í•œ ë‚ ì”¨ê°€ ëŒ€ë¶€ë¶„ì…ë‹ˆë‹¤.", "í‰ê· ê¸°ì˜¨": "ì•½ 18~26ë„", "ê´€ê´‘ì§€": ["ì—í íƒ‘", "ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€", "ëª½ë§ˆë¥´íŠ¸ ì–¸ë•"], "ë§›ì§‘": ["Le Relais de l'EntrecÃ´te", "LadurÃ©e"]},
         "budget_breakdown": {"í•­ê³µí¸": "110ë§Œì›", "ìˆ™ë°•": "100ë§Œì› (í˜¸í…” 4ë°•)", "ì‹ë¹„": "30ë§Œì›", "ê¸°íƒ€": "30ë§Œì› (ì…ì¥ë£Œ, êµí†µ ë“±)"}, "hotel": {"name": "Hotel Le Six", "rating": "4.4/5", "desc": "ëª½íŒŒë¥´ë‚˜ìŠ¤ ê·¼ì²˜ ë¶€í‹°í¬ í˜¸í…”"}}
    ]

# ì ìˆ˜ ê³„ì‚° í•¨ìˆ˜
def score_destination(dest, climate, activity, companion, budget):
    score = 0
    if dest["climate"] == climate:
        score += 3
    elif climate in ["ì¶”ìš´", "ì‹œì›í•œ", "ë”ìš´"] and dest["climate"] in ["ì¶”ìš´", "ì‹œì›í•œ", "ë”ìš´"]:
        if abs(["ì¶”ìš´", "ì‹œì›í•œ", "ë”ìš´"].index(climate) - ["ì¶”ìš´", "ì‹œì›í•œ", "ë”ìš´"].index(dest["climate"])) == 1:
            score += 1
    if dest["activity"] == activity:
        score += 3
    if companion in dest["companion"]:
        score += 3
    if budget >= dest["min_budget"]:
        score += 3
    elif budget >= dest["min_budget"] * 0.8:
        score += 1
    return score

# ì—¬í–‰ ëª…ì–¸ í•¨ìˆ˜
def get_travel_quote():
    quotes = [
        '"ì—¬í–‰ì€ ë‹¹ì‹ ì„ ë§ì—†ì´ ë§Œë“  ë‹¤ìŒ, ë‹¹ì‹ ì„ ì´ì•¼ê¸°ê¾¼ìœ¼ë¡œ ë§Œë“ ë‹¤." â€“ ì´ë¸ ë°”íˆ¬íƒ€',
        '"ì„¸ìƒì€ í•œ ê¶Œì˜ ì±…ì´ê³ , ì—¬í–‰í•˜ì§€ ì•ŠëŠ” ì‚¬ëŒì€ ê·¸ ì±…ì˜ í•œ í˜ì´ì§€ë§Œ ì½ëŠ” ê²ƒì´ë‹¤." â€“ ì„± ì•„ìš°êµ¬ìŠ¤í‹°ëˆ„ìŠ¤',
        '"ê°€ì¥ ìœ„ëŒ€í•œ ì—¬í–‰ì€ ìš°ë¦¬ê°€ ì•„ì§ ê°€ë³´ì§€ ì•Šì€ ê³³ì„ í–¥í•œ ê²ƒì´ë‹¤." â€“ ì•Œë­ ë“œ ë³´í†µ'
    ]
    return random.choice(quotes)

# ë©”ì¸ í•¨ìˆ˜
def main():
    st.set_page_config(page_title="ğŸŒ ì—¬ë¦„ë°©í•™ í•´ì™¸ì—¬í–‰ ì¶”ì²œ", page_icon="âœˆï¸", layout="wide")
    st.title("ğŸŒ ì—¬ë¦„ë°©í•™ í•´ì™¸ì—¬í–‰ ì¶”ì²œ í”„ë¡œê·¸ë¨")
    st.markdown("---")

    with st.sidebar:
        st.header("ğŸ” ì—¬í–‰ ì·¨í–¥ ì¡°ì‚¬")
        climate = st.selectbox("ì›í•˜ëŠ” ê¸°í›„:", ["ë”ìš´", "ì‹œì›í•œ", "ì¶”ìš´"])
        activity = st.selectbox("ê¸°ëŒ€ í™œë™:", ["íœ´ì–‘", "ê´€ê´‘", "ì‡¼í•‘", "ëª¨í—˜"])
        companion = st.selectbox("ë™ë°˜ì:", ["í˜¼ì", "ì»¤í”Œ", "ì¹œêµ¬ë“¤"])
        budget = st.number_input("ì˜ˆì‚° (ë§Œì›):", 50, 1000, 200, 10)
        recommend_button = st.button("ğŸ¯ ì—¬í–‰ì§€ ì¶”ì²œë°›ê¸°!")

    if recommend_button:
        dests = get_destinations_data()
        best = max(dests, key=lambda d: score_destination(d, climate, activity, companion, budget))
        score = score_destination(best, climate, activity, companion, budget)
        img_url, source_url = get_wikipedia_image(best["name"])

        st.markdown("---")
        st.balloons()
        if img_url:
            st.image(img_url, caption=f"ğŸ“¸ {best['name']} ì—¬í–‰ì§€ ì „ê²½", use_column_width=True)
            if source_url:
                st.markdown(f"ğŸ“š ì¶œì²˜: [ìœ„í‚¤ë°±ê³¼]({source_url})")
        else:
            st.info("ğŸ” ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")

        st.markdown(f"## ğŸ‰ ì¶”ì²œ ì—¬í–‰ì§€: {best['name']}") 
        st.markdown(f"âœˆï¸ ë¹„í–‰ì‹œê°„: {best['flight_time']} | ğŸ§­ í˜„ì¬ ê³„ì ˆ: {'ë¶ë°˜êµ¬ì˜ ì—¬ë¦„' if best['hemisphere']=='ë¶' else 'ë‚¨ë°˜êµ¬ì˜ ê²¨ìš¸'}")
        st.metric("ë§¤ì¹­ ì ìˆ˜", f"{score}/12")

        with st.expander("ğŸ” ìƒì„¸ ì •ë³´ ë³´ê¸°"):
            st.subheader("ğŸŒ¡ï¸ ê¸°í›„ ë° ê´€ê´‘")
            st.write(best["description"]["ê¸°í›„"])
            st.write(f"í‰ê· ê¸°ì˜¨: {best['description']['í‰ê· ê¸°ì˜¨']}")
            st.write("ê´€ê´‘ì§€:", ", ".join(best["description"]["ê´€ê´‘ì§€"]))

            st.subheader("ğŸ½ï¸ ë§›ì§‘ ì¶”ì²œ")
            st.write(", ".join(best["description"]["ë§›ì§‘"]))

            st.subheader("ğŸ¨ í˜¸í…” ì •ë³´")
            st.write(f"{best['hotel']['name']} ({best['hotel']['rating']} â­): {best['hotel']['desc']}")

            st.subheader("ğŸ’° ì˜ˆì‚°")
            for k, v in best["budget_breakdown"].items():
                st.write(f"{k}: {v}")

        st.markdown("---")
        st.markdown(f"> ğŸ“– {get_travel_quote()}")
    else:
        st.markdown("ğŸ‘ˆ ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ ì¡°ê±´ì„ ì„ íƒí•´ì£¼ì„¸ìš”!")

if __name__ == "__main__":
    main()
